<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>The Movie DB API</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<style>
		#movie-container img {
			max-width: 100%;
			height: auto;
			margin-bottom: 10px;
		}
		big + div {
			font-style: italic;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="row">
			<h1 class="col-12 mt-4">Movie Search</h1>
		</div> <!-- .row -->

		<div class="row">
			<form class="col-12" id="search-form">
				<div class="form-row">
					<div class="col-12 mt-4 col-sm-6 col-md-4 col-lg-3">
						<label for="search-term" class="sr-only">Search:</label>

						<input type="text" name="" id="search-term" class="form-control" placeholder="Search...">

					</div>
					<div class="col-12 mt-4 col-sm-auto">
						<button type="submit" class="btn btn-primary btn-block">Search</button>
					</div>
				</div> <!-- .form-row -->
			</form>
		</div> <!-- .row -->

		<div class="row">
			<div class="col-12 mt-4 mb-4">

				Showing <span id="num-results" class="font-weight-bold">0</span> of <span id="num-total" class="font-weight-bold">0</span> result(s).
				
			</div>
		</div> <!-- .row -->
		
		<div id="movie-container" class="row">

			<div class="text-center my-3 col-6 col-sm-4 col-md-3 col-lg-2">
				<img alt="Venom" src="http://image.tmdb.org/t/p/w500/2uNW4WbgBXL25BAbXGLnLqX71Sw.jpg">
				<big>Venom</big>
				<div>2018-10-03</div>
			</div>

			<div class="text-center my-3 col-6 col-sm-4 col-md-3 col-lg-2">
				<img alt="A Star Is Born" src="http://image.tmdb.org/t/p/w500/wrFpXMNBRj2PBiN4Z5kix51XaIZ.jpg">
				<big>A Star Is Born</big>
				<div>2018-10-03</div>
			</div>

			<div class="text-center my-3 col-6 col-sm-4 col-md-3 col-lg-2">
				<img alt="The Predator" src="http://image.tmdb.org/t/p/w500/wMq9kQXTeQCHUZOG4fAe5cAxyUA.jpg">
				<big>The Predator</big>
				<div>2018-09-13</div>
			</div>

			<div class="text-center my-3 col-6 col-sm-4 col-md-3 col-lg-2">
				<img alt="Halloween" src="http://image.tmdb.org/t/p/w500/lNkDYKmrVem1J0aAfCnQlJOCKnT.jpg">
				<big>Halloween</big>
				<div>2018-10-18</div>
			</div>

			<div class="text-center my-3 col-6 col-sm-4 col-md-3 col-lg-2">
				<img alt="First Man" src="http://image.tmdb.org/t/p/w500/i91mfvFcPPlaegcbOyjGgiWfZzh.jpg">
				<big>First Man</big>
				<div>2018-10-11</div>
			</div>

			<div class="text-center my-3 col-6 col-sm-4 col-md-3 col-lg-2">
				<img alt="The Nun" src="http://image.tmdb.org/t/p/w500/sFC1ElvoKGdHJIWRpNB3xWJ9lJA.jpg">
				<big>The Nun</big>
				<div>2018-09-05</div>
			</div>

			<div class="text-center my-3 col-6 col-sm-4 col-md-3 col-lg-2">
				<img alt="Mile 22" src="http://image.tmdb.org/t/p/w500/dT1XzjxRDR56xOm4Ph0INV4EmWJ.jpg">
				<big>Mile 22</big>
				<div>2018-08-16</div>
			</div>

			<div class="text-center my-3 col-6 col-sm-4 col-md-3 col-lg-2">
				<img alt="Johnny English Strikes Again" src="http://image.tmdb.org/t/p/w500/tCBxnZwLiY1BOKw3tH6AxHZdqPh.jpg">
				<big>Johnny English Strikes Again</big>
				<div>2018-09-13</div>
			</div>

			<div class="text-center my-3 col-6 col-sm-4 col-md-3 col-lg-2">
				<img alt="Incredibles 2" src="http://image.tmdb.org/t/p/w500/x1txcDXkcM65gl7w20PwYSxAYah.jpg">
				<big>Incredibles 2</big>
				<div>2018-06-14</div>
			</div>

			<div class="text-center my-3 col-6 col-sm-4 col-md-3 col-lg-2">
				<img alt="Goosebumps 2: Haunted Halloween" src="http://image.tmdb.org/t/p/w500/8bcpki9GfXdXj9esFpPtlate8v0.jpg">
				<big>Goosebumps 2: Haunted Halloween</big>
				<div>2018-10-11</div>
			</div>

			<div class="text-center my-3 col-6 col-sm-4 col-md-3 col-lg-2">
				<img alt="Smallfoot" src="http://image.tmdb.org/t/p/w500/4nKoB6wMVXfsYgRZK5lHZ5VMQ6J.jpg">
				<big>Smallfoot</big>
				<div>2018-09-20</div>
			</div>

			<div class="text-center my-3 col-6 col-sm-4 col-md-3 col-lg-2">
				<img alt="Skyscraper" src="http://image.tmdb.org/t/p/w500/5LYSsOPzuP13201qSzMjNxi8FxN.jpg">
				<big>Skyscraper</big>
				<div>2018-07-11</div>
			</div>

		</div> <!-- .row -->
	</div> <!-- .container -->
	<script>
		document.querySelector('#search-form').onsubmit = function()
		{
			var term = document.querySelector('#search-term').value.trim();
			var url = "https://api.themoviedb.org/3/search/movie?api_key=3e0c6457794ffee6763438d6206877d1&query=" + term;
			ajax(url);
			return false;
		}
		function ajax(url)
		{
			// Create AJAX object.
			var xhr = new XMLHttpRequest();
			// .open(Method [GET/POST], url, Async? [true/false])
			xhr.open('GET', url, true);
			// onload Event Handler. Triggered when response is loaded.
			xhr.onload = function()
			{
				if (xhr.status == 200) 
				{
					displayData(JSON.parse(xhr.responseText));
				} 
				else 
				{
					// error
					alert('AJAX Error');
					console.log(xhr);
				}
			};
			xhr.send();
		}
		function displayData(data)
		{
			document.querySelector("#num-results").innerHTML = data.results.length;
			document.querySelector("#num-total").innerHTML = data.total_results;
			clearDom();
			var src;
			for(var i=0; i<data.results.length; i++)
			{
				if(data.results[i].poster_path == null)
					src = "";
				else
					src = "http://image.tmdb.org/t/p/w500" + data.results[i].poster_path;
				addFilm(src, data.results[i].title, data.results[i].release_date);
			}
		}
		function clearDom()
		{
			document.querySelector("#movie-container").innerHTML = "";
		}
		function addFilm(src, alt, date)
		{
			var parent = document.querySelector("#movie-container");
			var div1 = document.createElement("div");
			parent.appendChild(div1);
			div1.classList.add("text-center", "my-3", "col-6", "col-sm-4", "col-md-3", "col-lg-2");
			var img = document.createElement("img");
			img.src = src;
			img.alt = alt;
			var big = document.createElement("big");
			big.innerHTML = alt;
			var div2 = document.createElement("div");
			div2.innerHTML = date;
			div1.appendChild(img);
			div1.appendChild(big);
			div1.appendChild(div2);
		}
	</script>
</body>
</html>